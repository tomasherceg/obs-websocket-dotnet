@page
@using Microsoft.Extensions.Configuration
@using ObsWebsocketDashboard
@model ObsWebsocketDashboard.IndexModel

<!DOCTYPE html>
<html>
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>OBS Remote Control</title>
    <link href="~/lib/bootstrap/css/bootstrap.css" rel="stylesheet"/>
    <link href="~/site.css" rel="stylesheet"/>
</head>
<body>
    
<div id="container" class="container"></div>
    
@if (!User.Identity.IsAuthenticated)
{
    <form method="get" action="/">
        <p>
            Enter Client ID:
            <input type="text" name="access_token"/>
        </p>
        <p>
            <input type="submit" value="Sign In"/>
        </p>
    </form>
}
else
{
    <script src="~/lib/signalr/signalr.js"></script>
    <script src="~/lib/react/umd/react.development.js"></script>
    <script src="~/lib/react-dom/umd/react-dom.development.js"></script>
    <script src="~/app.js"></script>
    <script type="text/javascript">
        const app = new App(signalR, "@User.Identity.Name");
        app.run();
    </script>
}

</body>
</html>

@{
}
